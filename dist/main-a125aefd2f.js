(function(){"use strict";var e;e=["ui.router","ngResource","app.constants","appirio-tech-ng-api-services","appirio-tech-ng-auth"],angular.module("appirio-tech-ng-login-reg",e)}).call(this),angular.module("appirio-tech-ng-login-reg").run(["$templateCache",function(e){e.put("views/forgot-password.directive.html",'<p class="success">Thanks, we\'ve emailed you a reset link. Please check your inbox. If you still need help, please contact us at support@topcoder.com</p><form ng-submit="vm.submit()" method="post"><input type="text" ng-model="vm.email" required="required" placeholder="email" autofocus="autofocus" class="widest"/><button type="submit" class="action">send reset link</button></form>'),e.put("views/login-reg-shell.directive.html",'<header class="flex center middle"><img src="/images/asp-185f877d16.svg"/></header><main ng-if="vm.flow == \'LOGIN\'" class="elevated-bottom"><h1>welcome back to appirio</h1><p class="secondary">Let\'s start building your app.  Login or create your account below to begin.</p><login></login></main><footer ng-if="vm.flow == \'LOGIN\'"><p>Don\'t have an account? <a ui-sref="register">Register Now</a></p></footer><main ng-if="vm.flow == \'REGISTRATION\'" class="elevated-bottom"><h1>welcome to appirio</h1><p class="secondary">Let\'s start building your app.  Create your account below to begin.</p><registration></registration></main><footer ng-if="vm.flow == \'REGISTRATION\'"><p>Already have an account? <a ui-sref="login">Login Here</a></p></footer><main ng-if="vm.flow == \'REGISTRATION_SUCCESS\'" class="elevated-bottom"><p>Thanks for creating an account.  We\'ve sent you a confirmation link.  Please check your email and click the link to activate your account. If you can\'t find the message please contact <a href="mailto:support@asp.com">support@asp.com</a></p></main><main ng-if="vm.flow == \'FORGOT\'" class="elevated-bottom"><h1>reset password</h1><p class="secondary">Enter your email and we\'ll send you a link to reset your password.</p><forgot-password></forgot-password></main><footer ng-if="vm.flow == \'FORGOT\'"><p><a ui-sref="login">Back to Login</a></p></footer><main ng-if="vm.flow == \'RESET\'" class="elevated-bottom"><h1>reset password</h1><p class="secondary">Enter your email and we\'ll send you a link to reset your password.</p><reset-password></reset-password></main><footer ng-if="vm.flow == \'RESET\'"><p><a ui-sref="login">Back to Login</a></p></footer>'),e.put("views/login.directive.html",'<p ng-class="{ hide: !vm.error }" class="error transition">We can\'t find an account with the email / password you entered. Please try again.</p><loader ng-if="vm.loading"></loader><form ng-submit="vm.submit()" method="post" class="flex column middle"><input type="text" ng-model="vm.username" required="required" placeholder="username" autofocus="autofocus" class="widest"/><input type="password" ng-model="vm.password" required="required" placeholder="password" class="widest"/><div class="forgot"><a ui-sref="RESET_PASSWORD">Forgot Password?</a></div><button type="submit" class="action">login</button></form>'),e.put("views/registration.directive.html",'<p ng-class="{ hide: !vm.error }" class="error">{{ vm.errorMessage }}</p><loader ng-if="vm.loading"></loader><form ng-submit="vm.submit()"><div class="first-name"><input type="text" name="first-name" ng-model="vm.firstName" required="required" placeholder="First Name" maxlength="64" autofocus="autofocus" class="widest"/></div><div class="last-name"><input type="text" name="last-name" ng-model="vm.lastName" required="required" placeholder="Last Name" maxlength="64" class="widest"/></div><div class="organization"><input type="text" name="organization" ng-model="vm.organization" required="required" placeholder="Organization" class="widest"/></div><hr/><div class="username"><input type="text" name="username" ng-model="vm.username" required="required" placeholder="Username" class="widest"/><div class="tooltip elevated"><div class="arrow"></div><p>Your username is public, please pick one that uses letters, numbers, and these special characters: (-_.{}[])</p></div></div><div class="password"><input type="password" name="password" ng-model="vm.password" required="required" placeholder="Password" class="widest"/><div class="tooltip elevated"><div class="arrow"></div><p class="header">Your password must be:</p><ul class="use"><li><p>At least 8 characters long.</p></li><li><p>At least 1 letter (A-Z)</p></li><li><p>At least 1 number (0-9) or symbol (!?-_.,;)</p></li></ul></div></div><input type="email" name="email" ng-model="vm.email" required="required" placeholder="Email" class="widest"/><button type="submit" class="action submit">Register</button></form>'),e.put("views/reset-password.directive.html",'<p class="success">Your password has been updated.</p><form ng-submit="vm.submit()" method="post"><input type="password" ng-model="vm.email" required="required" placeholder="New Password" autofocus="autofocus" class="widest"/><button type="submit" class="action">reset password</button></form>'),e.put("views/sso-callback.directive.html","<p>SSO Callback Directive. Now redirecting...</p>"),e.put("views/sso-login.directive.html","<p>SSO Login Directive. Now redirecting...</p>")}]),function(){"use strict";var e;e=function(){return{restrict:"E",templateUrl:"views/login-reg-shell.directive.html",controller:"LoginRegShellController as vm",scope:{flow:"@"}}},angular.module("appirio-tech-ng-login-reg").directive("loginRegShell",e)}.call(this),function(){"use strict";var e;e=function(){return{restrict:"E",templateUrl:"views/forgot-password.directive.html",controller:"ForgotPasswordController as vm",scope:!0}},angular.module("appirio-tech-ng-login-reg").directive("forgotPassword",e)}.call(this),function(){"use strict";var e;e=function(){return{restrict:"E",templateUrl:"views/login.directive.html",controller:"LoginController as vm",scope:!0}},angular.module("appirio-tech-ng-login-reg").directive("login",e)}.call(this),function(){"use strict";var e;e=function(){return{restrict:"E",templateUrl:"views/registration.directive.html",controller:"RegistrationController as vm",scope:!0}},angular.module("appirio-tech-ng-login-reg").directive("registration",e)}.call(this),function(){"use strict";var e;e=function(){return{restrict:"E",templateUrl:"views/reset-password.directive.html",controller:"ResetPasswordController as vm",scope:!0}},angular.module("appirio-tech-ng-login-reg").directive("resetPassword",e)}.call(this),function(){"use strict";var e;e=function(){return{restrict:"E",templateUrl:"views/sso-callback.directive.html",controller:"SSOCallbackController as vm",scope:{token:"@",status:"@",message:"@",auto:"@"}}},angular.module("appirio-tech-ng-login-reg").directive("ssoCallback",e)}.call(this),function(){"use strict";var e;e=function(){return{restrict:"E",templateUrl:"views/sso-login.directive.html",controller:"SSOLoginController as vm",scope:{org:"@",callbackState:"@",auto:"@"}}},angular.module("appirio-tech-ng-login-reg").directive("ssoLogin",e)}.call(this),function(){"use strict";var e;e=function(e){var r,t;return t=this,(r=function(){return t})()},e.$inject=["$state"],angular.module("appirio-tech-ng-login-reg").controller("ForgotPasswordController",e)}.call(this),function(){"use strict";var e;e=function(e,r,t,o,i){var s,a,n,l;return l=this,l.title="Login",l.username="",l.password="",l.error=!1,l.submit=null,l.loading=!1,l.submit=function(){var e;return l.error=!1,l.loading=!0,e={username:l.username,password:l.password,error:a,success:n},o.login(e)},a=function(e){return l.error=!0,l.loading=!1},n=function(){return l.error=!1,l.loading=!1,i.loadUser().then(function(o){var i,s,a;return a=r.search(),a.retUrl?r.path(a.retUrl).replace():a.retState?t.go(a.retState):e.preAuthState?(s=e.preAuthState,i=e.preAuthParams,delete e.preAuthState,delete e.preAuthParams,t.go(s,i)):"customer"===o.role?t.go("view-work-multiple"):"copilot"===o.role?t.go("copilot-projects"):t.go("home")})},(s=function(){return l})()},e.$inject=["$rootScope","$location","$state","AuthService","UserV3Service"],angular.module("appirio-tech-ng-login-reg").controller("LoginController",e)}.call(this),function(){"use strict";var e;e=function(e,r,t){var o,i,s,a,n;return n=this,n.title="Register",n.username="",n.password="",n.error=!1,n.errorMessage="Error Creating User",n.submit=null,n.loading=!1,n.submit=function(){var r,o;return n.error=!1,n.loading=!0,r=e.href("login",[],{absolute:!0}),o={handle:n.username,password:n.password,email:n.email,afterActivationURL:r},t.createUser(o,s,i)},i=function(e){return n.error=!0,n.loading=!1,n.errorMessage=e.data.result.content},a=function(){return e.go("view-work-multiple")},s=function(){var t;return n.error=!1,n.loading=!1,e.go("registration-success"),t={username:n.username,password:n.password,success:a},r.login(t)},(o=function(){return n})()},e.$inject=["$state","AuthService","UserV3Service"],angular.module("appirio-tech-ng-login-reg").controller("RegistrationController",e)}.call(this),function(){"use strict";var e;e=function(e){var r,t;return t=this,(r=function(){return t})()},e.$inject=["$state"],angular.module("appirio-tech-ng-login-reg").controller("ResetPasswordController",e)}.call(this),function(){"use strict";var e;e=function(e,r,t,o){var i,s,a,n,l,c;return c=this,l=e.token,n=e.status,a=e.message,s="false"!==e.auto,i=function(){return l&&t.setAppirioJWT(l),s?o.loadUser().then(function(e){return"customer"===e.role?r.go("view-work-multiple"):"copilot"===e.role?r.go("copilot-projects"):r.go("home")}):void 0},i(),c},e.$inject=["$scope","$state","TokenService","UserV3Service"],angular.module("appirio-tech-ng-login-reg").controller("SSOCallbackController",e)}.call(this),function(){"use strict";var e;e=function(e,r,t,o,i,s){var a,n,l,c,u;return u=this,u.error=!1,c=e.org,l=e.callbackState,n="false"!==e.auto,a=function(){var e,a,p;return n&&c?(p=r.href(l,{},{absolute:!0}),a=["https://"+o+"/authorize?","response_type=token","&client_id="+i,"&connection="+c,"&redirect_uri="+s+"/pub/callback.html","&state="+encodeURIComponent(p),"&scope=openid%20profile%20offline_access","&device=device"],e=a.join(""),console.log(e),t.location.href=e):u.error="No organization. Oh no!"},a(),u},e.$inject=["$scope","$state","$window","AUTH0_DOMAIN","AUTH0_CLIENT_ID","API_URL"],angular.module("appirio-tech-ng-login-reg").controller("SSOLoginController",e)}.call(this),function(){"use strict";var e;e=function(e){var r,t;return t=this,t.flow=e.flow||"LOGIN",(r=function(){return t})()},e.$inject=["$scope"],angular.module("appirio-tech-ng-login-reg").controller("LoginRegShellController",e)}.call(this);